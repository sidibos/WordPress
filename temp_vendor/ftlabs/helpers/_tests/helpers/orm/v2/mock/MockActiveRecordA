<?php
/**
 * A class which extends OrmActiveRecord for testing
 *
 * $Revision$
 * $Date$
 * $Author$
 *
 * @codingstandard Assanka
 * @author Luke Blaney <luke@assanka.net>
 * @copyright Assanka Limited [All rights reserved]
 */

require_once $_SERVER['CORE_PATH']."/helpers/orm/v2/OrmActiveRecord";

class MockActiveRecordA extends OrmActiveRecord {

	protected static $fields = array(
		"id" => array("visibility"=>'private', "required"=>false, "type"=>"integer"),
		"name" => array("visibility"=>'public', "required"=>false, "type"=>"text"),
		"bio" => array("visibility"=>'private', "required"=>false, "type"=>"textarea"),
		"alive" => array("visibility"=>'private', "required"=>false, "type"=>"check"),
		"fav_foods_names" => array("visibility"=>'private', "required"=>false, "type"=>"checklist"),
		"most_fav_food_name" => array("visibility"=>'private', "required"=>false, "type"=>"text"),
		"date_of_birth" => array("visibility"=>'private', "required"=>false, "type"=>"date"),
		"date_created" => array("visibility"=>'private', "required"=>false, "type"=>"datetime"),
		"started_race_at" => array("visibility"=>'private', "required"=>false, "type"=>"datetimeseconds"),
		"bedtime" => array("visibility"=>'private', "required"=>false, "type"=>"time"),
		"notification_time" => array("visibility"=>'private', "required"=>false, "type"=>"timeseconds"),
		"external_id_code" => array("visibility"=>'private', "required"=>false, "type"=>"hidden", 'length'=>25),
		"role" => array("visibility"=>'private', "required"=>false, "type"=>"dummy"),
		"language" => array("visibility"=>'private', "required"=>false, "type"=>"autocomplete"),
		"fav_season" => array("visibility"=>'public', "required"=>false, "type"=>"select", 'options'=>array('sum' => "Summer", 'aut' => "Autumn", 'win' => "Winter", 'spr' => "Spring")),
		"password" => array("visibility"=>'private', "required"=>false, "type"=>"password"),
		"cv" => array("visibility"=>'private', "required"=>false, "type"=>"richtext"),
		"profile_pic" => array("visibility"=>'public', "required"=>false, "type"=>"imageupload"),
		"birth_certificate" => array("visibility"=>'private', "required"=>false, "type"=>"upload"),
		"divider" => array("visibility"=>'private', "required"=>false, "type"=>"spacer"),
		"height" => array("visibility"=>'public', "required"=>false, "type"=>"float"),
	);
	protected static $links = array(
		"most_fav_food" => array("rel"=>"hasone", "destclass"=>"MockActiveRecordB", "fieldmap"=>array("most_fav_food_name"=>"name"), "type"=>"text"),
		"fav_foods" => array("rel"=>"junction", "destclass"=>"MockActiveRecordB", "table"=>"people_foods", "originmap"=>array("userid"=>"id"), "destmap"=>array("foodname"=>"name"), "type"=>"checklist"),
	);
	protected static $keyfields = array('id');
	protected static $tablename = "people";

	public function edit($data) {
		$this->_edit($data);
	}
	public function removeFromCache() {
		return parent::removeFromCache();
	}
	public static function getMemcache() {
		return parent::getMemcache();
	}
	public function getCacheKey() {
		return parent::getCacheKey();
	}
	public function save() {
		return parent::save();
	}
	public function link($linkname, $obj) {
		return parent::link($linkname, $obj);
	}
	public function unlink($linkname, $obj) {
		return parent::unlink($linkname, $obj);
	}
	public function unlinkAll($name) {
		foreach (static::$links as $link => $stuff) {
			parent::unlinkAll($link);
		}
	}
}

<?php
/**
 * A class which extends OrmActiveRecord for testing
 *
 * $Revision$
 * $Date$
 * $Author$
 *
 * @codingstandard Assanka
 * @author Luke Blaney <luke@assanka.net>
 * @copyright Assanka Limited [All rights reserved]
 */

require_once $_SERVER['CORE_PATH']."/helpers/orm/v2/OrmActiveRecord";

class MockActiveRecordB extends OrmActiveRecord {

	protected static $fields = array(
		"name" => array("visibility"=>'public', "required"=>false, "type"=>"text"),
	);
	protected static $links = array(
		"most_fav_of" => array("rel"=>"hasmany", "destclass"=>"MockActiveRecordA", "destlink"=>"most_fav_food"),
		"fav_of" => array("rel"=>"junction", "destclass"=>"MockActiveRecordA", "table"=>"people_foods", "originmap"=>array("foodname"=>"name"), "destmap"=>array("userid"=>"id")),
	);
	protected static $keyfields = array('name');
	protected static $tablename = "food";


	public function save() {
		return parent::save();
	}
	public function delete() {
		return parent::delete();
	}
	public function link($linkname, $obj) {
		return parent::link($linkname, $obj);
	}
	public function unlinkAll($name) {
		foreach (static::$links as $link => $stuff) {
			parent::unlinkAll($link);
		}
	}
	public function getRelations($linkname) {
		return parent::getRelations($linkname);
	}
}

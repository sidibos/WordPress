<?php
/**
 * Test for AssankaLoggerV1 - using the trace method
 *
 * @codingstandard ftlabs-phpcs
 * @copyright The Financial Times Limited [All rights reserved]
 */


class loggerTraceTest extends PHPUnit_Framework_TestCase {
	protected $logger;

	protected function setUp() {
		$this->logger = new AssankaLoggerV1("testlogger");
		$this->logger->setLogMethod("stdout");
	}
	public function testNothingIsLoggedWithNoTraceEnvVar() {
		$outputstring = "나는 유리를 먹을 수 있어요. 그래도 아프지 않아요";

		// Clear any TRACE enviroment variable
		putenv("TRACE");
		$this->expectOutputString("");
		$this->logger->trace($outputstring);
	}
	public function testSomethingIsLoggedWithTraceEnvVar() {
		$outputstring = "나는 유리를 먹을 수 있어요. 그래도 아프지 않아요";

		// Set the TRACE enviroment variable
		putenv("TRACE=1");
		$this->expectOutputString($outputstring."\n");
		$this->logger->trace($outputstring);
	}
}

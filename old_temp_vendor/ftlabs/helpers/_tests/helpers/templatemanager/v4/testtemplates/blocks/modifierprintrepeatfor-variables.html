This is some sample content to check that the "repeatfor" block modifier is working correctly with regards to variable output within the loop.

First, tests of variable availability within blocks from the "repeatfor" argument itself:

<!--@BLOCK:checkrepeat|repeatfor:testvar-->
Single variables should be output directly, as both <!--@testvar--> and <!--@value-->.
<!--@ENDBLOCK:checkrepeat-->

<!--@BLOCK:checkrepeat|repeatfor:testvar2-->
List variables should be output multiply, as both <!--@testvar2--> and <!--@value-->.
<!--@ENDBLOCK:checkrepeat-->

<!--@BLOCK:checkrepeat|repeatfor:testvar3-->
Collections should have their variables available via keys; for example <!--@key one--> and <!--@key two-->.
<!--@ENDBLOCK:checkrepeat-->

Next check that variables set on the templatemanager as a whole are still available within the blocks:

<!--@BLOCK:checkrepeat|repeatfor:testvar-->
Single variables should be output directly, as both <!--@testvar--> and <!--@value-->.  Variables such as <!--@outsidevarone--> and <!--@outsidevartwo--> should be available.
<!--@ENDBLOCK:checkrepeat-->

<!--@BLOCK:checkrepeat|repeatfor:testvar2-->
List variables should be output multiply, as both <!--@testvar2--> and <!--@value-->.  Variables such as <!--@outsidevarone--> and <!--@outsidevartwo--> should be available.
<!--@ENDBLOCK:checkrepeat-->

<!--@BLOCK:checkrepeat|repeatfor:testvar3-->
Collections should have their variables available via keys; for example <!--@key one--> and <!--@key two-->.  Variables such as <!--@outsidevarone--> and <!--@outsidevartwo--> should be available.
<!--@ENDBLOCK:checkrepeat-->

Next check that variables inside collection blocks override those set outside blocks:

<!--@BLOCK:checkrepeat|repeatfor:testvar3-->
Collections should allow access to external variables, like <!--@outsidevarone-->, but internal variables like <!--@insidevarone--> should be preferred.
<!--@ENDBLOCK:checkrepeat-->

Similarly for nested loops:

<!--@BLOCK:checkrepeatouter|repeatfor:testvar3-->
This outer block is for collections, and includes <!--@key one--> and <!--@key two--> as well as <!--@value-->.
	<!--@BLOCK:checkrepeatinner|repeatfor:testvar2-->The inner block should still have <!--@outsidevarone--> available, and should prefer <!--@key one--> and <!--@insidevarone-->. <!--@ENDBLOCK:checkrepeatinner-->
<!--@ENDBLOCK:checkrepeatouter-->

All done...
<?php
/**
 * Icon list
 *
 * Display a list of links in vertically-wrapped lists of icons
 *
 * @copyright The Financial Times Limited [All Rights Reserved]
 */
class IconlistV1 extends TemplateManager {

	/**
	 * Creates an Iconlist object
	 * 
	 * @return  Iconlist
	 */
	function __construct() {
		parent::__construct($_SERVER["CORE_PATH"]."/helpers/adminwidgets/iconlist/v1/");
	}

	/**
	 * Sets the title of the Iconlist.  If not set, the list will not have a title (better if the iconlist is the only thing on the page)
	 * 
	 * @param   string  $str  Title for the icon list
	 * @return  void
	 */
	function setTitle($str) {
		$this->set("title", $str);
	}

	/**
	 * Adds an item to the iconlist
	 * 
	 * @param   string  $name   Name of the item to add to the DOM
	 * @param   string  $link   Destination for the link
	 * @param   string  $icon   Location of the 16x16 icon to display next to the link
	 * @return  void
	 */
	function addItem($name, $link=false, $icon=false) {
		if (empty($icon)) {
			$ext = (preg_match("/\.([a-z0-9]){1,5}$/i", $link, $m)) ? $m[1] : "unknown";
			if (!is_file($_SERVER["CORE_PATH"]."/static/imgs/fileicons/16/".$ext.".png")) $ext = "unknown";
			$icon = $ext;
		}
		$this->add("items", array("name"=>$name,"link"=>$link,"icon"=>$icon));
	}

	/**
	 * Returns an XHTML representation of the iconlist
	 * 
	 * @return  string   XHTML source
	 */
	function output() {
		return $this->render("template");
	}
}

if (!class_exists('Iconlist')) class_alias('IconlistV1', 'Iconlist');

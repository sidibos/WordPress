
if(!window.console)
{var names=["log","debug","info","warn","error","assert","dir","dirxml","group","groupEnd","time","timeEnd","count","trace","profile","profileEnd"];window.console={};for(var i=0;i<names.length;++i)
window.console[names[i]]=function(){}}var swfobject=function(){var D="undefined",r="object",S="Shockwave Flash",W="ShockwaveFlash.ShockwaveFlash",q="application/x-shockwave-flash",R="SWFObjectExprInst",x="onreadystatechange",O=window,j=document,t=navigator,T=false,U=[h],o=[],N=[],I=[],l,Q,E,B,J=false,a=false,n,G,m=true,M=function(){var aa=typeof j.getElementById!=D&&typeof j.getElementsByTagName!=D&&typeof j.createElement!=D,ah=t.userAgent.toLowerCase(),Y=t.platform.toLowerCase(),ae=Y?/win/.test(Y):/win/.test(ah),ac=Y?/mac/.test(Y):/mac/.test(ah),af=/webkit/.test(ah)?parseFloat(ah.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false,X=!+"\v1",ag=[0,0,0],ab=null;if(typeof t.plugins!=D&&typeof t.plugins[S]==r){ab=t.plugins[S].description;if(ab&&!(typeof t.mimeTypes!=D&&t.mimeTypes[q]&&!t.mimeTypes[q].enabledPlugin)){T=true;X=false;ab=ab.replace(/^.*\s+(\S+\s+\S+$)/,"$1");ag[0]=parseInt(ab.replace(/^(.*)\..*$/,"$1"),10);ag[1]=parseInt(ab.replace(/^.*\.(.*)\s.*$/,"$1"),10);ag[2]=/[a-zA-Z]/.test(ab)?parseInt(ab.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}}else{if(typeof O.ActiveXObject!=D){try{var ad=new ActiveXObject(W);if(ad){ab=ad.GetVariable("$version");if(ab){X=true;ab=ab.split(" ")[1].split(",");ag=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}}catch(Z){}}}return{w3:aa,pv:ag,wk:af,ie:X,win:ae,mac:ac}}(),k=function(){if(!M.w3){return}if((typeof j.readyState!=D&&j.readyState=="complete")||(typeof j.readyState==D&&(j.getElementsByTagName("body")[0]||j.body))){f()}if(!J){if(typeof j.addEventListener!=D){j.addEventListener("DOMContentLoaded",f,false)}if(M.ie&&M.win){j.attachEvent(x,function(){if(j.readyState=="complete"){j.detachEvent(x,arguments.callee);f()}});if(O==top){(function(){if(J){return}try{j.documentElement.doScroll("left")}catch(X){setTimeout(arguments.callee,0);return}f()})()}}if(M.wk){(function(){if(J){return}if(!/loaded|complete/.test(j.readyState)){setTimeout(arguments.callee,0);return}f()})()}s(f)}}();function f(){if(J){return}try{var Z=j.getElementsByTagName("body")[0].appendChild(C("span"));Z.parentNode.removeChild(Z)}catch(aa){return}J=true;var X=U.length;for(var Y=0;Y<X;Y++){U[Y]()}}function K(X){if(J){X()}else{U[U.length]=X}}function s(Y){if(typeof O.addEventListener!=D){O.addEventListener("load",Y,false)}else{if(typeof j.addEventListener!=D){j.addEventListener("load",Y,false)}else{if(typeof O.attachEvent!=D){i(O,"onload",Y)}else{if(typeof O.onload=="function"){var X=O.onload;O.onload=function(){X();Y()}}else{O.onload=Y}}}}}function h(){if(T){V()}else{H()}}function V(){var X=j.getElementsByTagName("body")[0];var aa=C(r);aa.setAttribute("type",q);var Z=X.appendChild(aa);if(Z){var Y=0;(function(){if(typeof Z.GetVariable!=D){var ab=Z.GetVariable("$version");if(ab){ab=ab.split(" ")[1].split(",");M.pv=[parseInt(ab[0],10),parseInt(ab[1],10),parseInt(ab[2],10)]}}else{if(Y<10){Y++;setTimeout(arguments.callee,10);return}}X.removeChild(aa);Z=null;H()})()}else{H()}}function H(){var ag=o.length;if(ag>0){for(var af=0;af<ag;af++){var Y=o[af].id;var ab=o[af].callbackFn;var aa={success:false,id:Y};if(M.pv[0]>0){var ae=c(Y);if(ae){if(F(o[af].swfVersion)&&!(M.wk&&M.wk<312)){w(Y,true);if(ab){aa.success=true;aa.ref=z(Y);ab(aa)}}else{if(o[af].expressInstall&&A()){var ai={};ai.data=o[af].expressInstall;ai.width=ae.getAttribute("width")||"0";ai.height=ae.getAttribute("height")||"0";if(ae.getAttribute("class")){ai.styleclass=ae.getAttribute("class")}if(ae.getAttribute("align")){ai.align=ae.getAttribute("align")}var ah={};var X=ae.getElementsByTagName("param");var ac=X.length;for(var ad=0;ad<ac;ad++){if(X[ad].getAttribute("name").toLowerCase()!="movie"){ah[X[ad].getAttribute("name")]=X[ad].getAttribute("value")}}P(ai,ah,Y,ab)}else{p(ae);if(ab){ab(aa)}}}}}else{w(Y,true);if(ab){var Z=z(Y);if(Z&&typeof Z.SetVariable!=D){aa.success=true;aa.ref=Z}ab(aa)}}}}}function z(aa){var X=null;var Y=c(aa);if(Y&&Y.nodeName=="OBJECT"){if(typeof Y.SetVariable!=D){X=Y}else{var Z=Y.getElementsByTagName(r)[0];if(Z){X=Z}}}return X}function A(){return!a&&F("6.0.65")&&(M.win||M.mac)&&!(M.wk&&M.wk<312)}function P(aa,ab,X,Z){a=true;E=Z||null;B={success:false,id:X};var ae=c(X);if(ae){if(ae.nodeName=="OBJECT"){l=g(ae);Q=null}else{l=ae;Q=X}aa.id=R;if(typeof aa.width==D||(!/%$/.test(aa.width)&&parseInt(aa.width,10)<310)){aa.width="310"}if(typeof aa.height==D||(!/%$/.test(aa.height)&&parseInt(aa.height,10)<137)){aa.height="137"}j.title=j.title.slice(0,47)+" - Flash Player Installation";var ad=M.ie&&M.win?"ActiveX":"PlugIn",ac="MMredirectURL="+O.location.toString().replace(/&/g,"%26")+"&MMplayerType="+ad+"&MMdoctitle="+j.title;if(typeof ab.flashvars!=D){ab.flashvars+="&"+ac}else{ab.flashvars=ac}if(M.ie&&M.win&&ae.readyState!=4){var Y=C("div");X+="SWFObjectNew";Y.setAttribute("id",X);ae.parentNode.insertBefore(Y,ae);ae.style.display="none";(function(){if(ae.readyState==4){ae.parentNode.removeChild(ae)}else{setTimeout(arguments.callee,10)}})()}u(aa,ab,X)}}function p(Y){if(M.ie&&M.win&&Y.readyState!=4){var X=C("div");Y.parentNode.insertBefore(X,Y);X.parentNode.replaceChild(g(Y),X);Y.style.display="none";(function(){if(Y.readyState==4){Y.parentNode.removeChild(Y)}else{setTimeout(arguments.callee,10)}})()}else{Y.parentNode.replaceChild(g(Y),Y)}}function g(ab){var aa=C("div");if(M.win&&M.ie){aa.innerHTML=ab.innerHTML}else{var Y=ab.getElementsByTagName(r)[0];if(Y){var ad=Y.childNodes;if(ad){var X=ad.length;for(var Z=0;Z<X;Z++){if(!(ad[Z].nodeType==1&&ad[Z].nodeName=="PARAM")&&!(ad[Z].nodeType==8)){aa.appendChild(ad[Z].cloneNode(true))}}}}}return aa}function u(ai,ag,Y){var X,aa=c(Y);if(M.wk&&M.wk<312){return X}if(aa){if(typeof ai.id==D){ai.id=Y}if(M.ie&&M.win){var ah="";for(var ae in ai){if(ai[ae]!=Object.prototype[ae]){if(ae.toLowerCase()=="data"){ag.movie=ai[ae]}else{if(ae.toLowerCase()=="styleclass"){ah+=' class="'+ai[ae]+'"'}else{if(ae.toLowerCase()!="classid"){ah+=" "+ae+'="'+ai[ae]+'"'}}}}}var af="";for(var ad in ag){if(ag[ad]!=Object.prototype[ad]){af+='<param name="'+ad+'" value="'+ag[ad]+'" />'}}aa.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+ah+">"+af+"</object>";N[N.length]=ai.id;X=c(ai.id)}else{var Z=C(r);Z.setAttribute("type",q);for(var ac in ai){if(ai[ac]!=Object.prototype[ac]){if(ac.toLowerCase()=="styleclass"){Z.setAttribute("class",ai[ac])}else{if(ac.toLowerCase()!="classid"){Z.setAttribute(ac,ai[ac])}}}}for(var ab in ag){if(ag[ab]!=Object.prototype[ab]&&ab.toLowerCase()!="movie"){e(Z,ab,ag[ab])}}aa.parentNode.replaceChild(Z,aa);X=Z}}return X}function e(Z,X,Y){var aa=C("param");aa.setAttribute("name",X);aa.setAttribute("value",Y);Z.appendChild(aa)}function y(Y){var X=c(Y);if(X&&X.nodeName=="OBJECT"){if(M.ie&&M.win){X.style.display="none";(function(){if(X.readyState==4){b(Y)}else{setTimeout(arguments.callee,10)}})()}else{X.parentNode.removeChild(X)}}}function b(Z){var Y=c(Z);if(Y){for(var X in Y){if(typeof Y[X]=="function"){Y[X]=null}}Y.parentNode.removeChild(Y)}}function c(Z){var X=null;try{X=j.getElementById(Z)}catch(Y){}return X}function C(X){return j.createElement(X)}function i(Z,X,Y){Z.attachEvent(X,Y);I[I.length]=[Z,X,Y]}function F(Z){var Y=M.pv,X=Z.split(".");X[0]=parseInt(X[0],10);X[1]=parseInt(X[1],10)||0;X[2]=parseInt(X[2],10)||0;return(Y[0]>X[0]||(Y[0]==X[0]&&Y[1]>X[1])||(Y[0]==X[0]&&Y[1]==X[1]&&Y[2]>=X[2]))?true:false}function v(ac,Y,ad,ab){if(M.ie&&M.mac){return}var aa=j.getElementsByTagName("head")[0];if(!aa){return}var X=(ad&&typeof ad=="string")?ad:"screen";if(ab){n=null;G=null}if(!n||G!=X){var Z=C("style");Z.setAttribute("type","text/css");Z.setAttribute("media",X);n=aa.appendChild(Z);if(M.ie&&M.win&&typeof j.styleSheets!=D&&j.styleSheets.length>0){n=j.styleSheets[j.styleSheets.length-1]}G=X}if(M.ie&&M.win){if(n&&typeof n.addRule==r){n.addRule(ac,Y)}}else{if(n&&typeof j.createTextNode!=D){n.appendChild(j.createTextNode(ac+" {"+Y+"}"))}}}function w(Z,X){if(!m){return}var Y=X?"visible":"hidden";if(J&&c(Z)){c(Z).style.visibility=Y}else{v("#"+Z,"visibility:"+Y)}}function L(Y){var Z=/[\\\"<>\.;]/;var X=Z.exec(Y)!=null;return X&&typeof encodeURIComponent!=D?encodeURIComponent(Y):Y}var d=function(){if(M.ie&&M.win){window.attachEvent("onunload",function(){var ac=I.length;for(var ab=0;ab<ac;ab++){I[ab][0].detachEvent(I[ab][1],I[ab][2])}var Z=N.length;for(var aa=0;aa<Z;aa++){y(N[aa])}for(var Y in M){M[Y]=null}M=null;for(var X in swfobject){swfobject[X]=null}swfobject=null})}}();return{registerObject:function(ab,X,aa,Z){if(M.w3&&ab&&X){var Y={};Y.id=ab;Y.swfVersion=X;Y.expressInstall=aa;Y.callbackFn=Z;o[o.length]=Y;w(ab,false)}else{if(Z){Z({success:false,id:ab})}}},getObjectById:function(X){if(M.w3){return z(X)}},embedSWF:function(ab,ah,ae,ag,Y,aa,Z,ad,af,ac){var X={success:false,id:ah};if(M.w3&&!(M.wk&&M.wk<312)&&ab&&ah&&ae&&ag&&Y){w(ah,false);K(function(){ae+="";ag+="";var aj={};if(af&&typeof af===r){for(var al in af){aj[al]=af[al]}}aj.data=ab;aj.width=ae;aj.height=ag;var am={};if(ad&&typeof ad===r){for(var ak in ad){am[ak]=ad[ak]}}if(Z&&typeof Z===r){for(var ai in Z){if(typeof am.flashvars!=D){am.flashvars+="&"+ai+"="+Z[ai]}else{am.flashvars=ai+"="+Z[ai]}}}if(F(Y)){var an=u(aj,am,ah);if(aj.id==ah){w(ah,true)}X.success=true;X.ref=an}else{if(aa&&A()){aj.data=aa;P(aj,am,ah,ac);return}else{w(ah,true)}}if(ac){ac(X)}})}else{if(ac){ac(X)}}},switchOffAutoHideShow:function(){m=false},ua:M,getFlashPlayerVersion:function(){return{major:M.pv[0],minor:M.pv[1],release:M.pv[2]}},hasFlashPlayerVersion:F,createSWF:function(Z,Y,X){if(M.w3){return u(Z,Y,X)}else{return undefined}},showExpressInstall:function(Z,aa,X,Y){if(M.w3&&A()){P(Z,aa,X,Y)}},removeSWF:function(X){if(M.w3){y(X)}},createCSS:function(aa,Z,Y,X){if(M.w3){v(aa,Z,Y,X)}},addDomLoadEvent:K,addLoadEvent:s,getQueryParamValue:function(aa){var Z=j.location.search||j.location.hash;if(Z){if(/\?/.test(Z)){Z=Z.split("?")[1]}if(aa==null){return L(Z)}var Y=Z.split("&");for(var X=0;X<Y.length;X++){if(Y[X].substring(0,Y[X].indexOf("="))==aa){return L(Y[X].substring((Y[X].indexOf("=")+1)))}}}return""},expressInstallCallback:function(){if(a){var X=c(R);if(X&&l){X.parentNode.replaceChild(l,X);if(Q){w(Q,true);if(M.ie&&M.win){l.style.display="block"}}if(E){E(B)}}a=false}}}}();FT.featureDetect=FT.featureDetect||{};FT.featureDetect.supportsTouch=(function(){var el=document.createElement('div'),result=false;el.setAttribute('ongesturestart','return;');if(typeof el.ongesturestart==="function"){result=true;}
el=null;return result;}());FT.featureDetect.supportsTransitions=(function(){var b=document.body||document.documentElement,s=b.style,p='transition',v=['Moz','Webkit','Khtml','O','ms'],i;if(typeof s[p]==='string'){return true;}
p=p.charAt(0).toUpperCase()+p.substr(1);for(i=0;i<v.length;i=i+1){if(typeof s[v[i]+p]==='string'){return true;}}
return false;}());FT.lib=FT.lib||{};FT.lib.getContentWidth=function(el){var $el=(el&&el instanceof FT.$)?el:FT.$(el),current,overflowWidth;if($el.length===0||!$el[0].nodeName){return-1;}
current={overflow:$el.css("overflow"),paddingLeft:parseInt($el.css("padding-left"),0),paddingRight:parseInt($el.css("padding-right"),0)};$el.css({"padding-left":0,"padding-right":0});if(!current.overflow||current.overflow==="visible"){$el.css("overflow","hidden");}
overflowWidth=$el[0].scrollWidth;$el.css({"overflow":current.overflow,"padding-left":current.paddingLeft,"padding-right":current.paddingRight});return(overflowWidth===0)?$el.width():overflowWidth;};FT.lib.sizeToOverflowedContent=function($el){if(!$el){return;}
var overflowWidth=FT.lib.getContentWidth($el);if(overflowWidth>$el.width()){$el.width(overflowWidth);}};FT.render.page=(function(){var $body=FT.$(document.body);return{isEditor:function(){return $body.hasClass("editor");},isPreview:function(){return $body.hasClass("preview");},closeAll:function(){if(FT.render.navigation){FT.render.navigation.close();}
if(FT.render.editionChanger){FT.render.editionChanger.close();}
if(FT.render.loginForm){FT.render.loginForm.close();}}};}());FT.$(document).ready(function(){var i,fullstoryBody,pmData,jobsboxFormSelector,aysc_cookie,ipCountry,regArea,metroArea;if(FT.$('#editionChanger').length){FT.render.editionChanger=new FT.render.EditionChanger('#editionChanger');}
if(FT.$('#navigation').length){FT.render.navigation=new FT.Render.Navigation('#navigation');}
if(FT.$('.freestyle #simpleSearchField').not('.ft-search-auto-completable').length){FT.render.siteSearch=new FT.Render.SiteSearch('#ft-search',{});}
FT.search.autoCompleteFields=[];FT.$('.ft-search-auto-completable').each(function(){FT.search.autoCompleteFields.push(new FT.search.AutoCompleteField(FT.$(this)));});if(!FT.render.page.isEditor()){FT.analytics.clickPositionReporter.init();if(FT.Conker&&FT.$.type(FT.Conker.applyConcurrencyLogic)==="function"&&!FT.bIsAdRefresh){FT.Conker.applyConcurrencyLogic(FT.Conker.receiveConkerResponse,false,false,false,false);}
if(FTSection){FT.analytics.siteIntelligence.setPageId("rhc-rss-page-"+FTSection);}
if(!FT.render.page.isPreview()){FT.analytics.siTrackLinks=new FT.analytics.SiTrackLinks(FT.$('div.partnerLinks .siTrack'),'div.partnerLinks','a.siTrack:eq(0)');FT.analytics.downloadLinkTrack.init();}
if(FT.ads&&FT.$.type(FT.ads.complete)==="function"){FT.ads.complete();}}
FT.Render.deviceSwitching.run(FT.$(".bottomSection"));jobsboxFormSelector='form.jobsBoxSearch';FT.render.jobsBoxes=new FT.Render.JobsBox(jobsboxFormSelector,FT.$(jobsboxFormSelector).closest('.jobsBox').find('.comp-header-title a').attr('href'));FT.wrapper.initialisers=FT.wrapper.initialisers||[];for(i=0;i<FT.wrapper.initialisers.length;i+=1){FT.wrapper.initialisers[i].call();}
FT.wrapper.initialisers.push=function(){for(i=0;i<arguments.length;i++){if(typeof arguments[i]==='function'){arguments[i].call(this);}}};FT.userInteracting=false;FT.$(document).undelegate(".disableEnhanced");FT.analytics.performanceMonitor.init(FT.analytics.timerStore.getTimers());pmData=FT.analytics.performanceMonitor.getData();if(pmData.hasOwnProperty("perceivedLoadTime")||FT.analytics.sendGeoIPLater){if(pmData.hasOwnProperty("perceivedLoadTime")){FT.analytics.siteIntelligence.addTrackParam("perceivedLoad",pmData.perceivedLoadTime.renderTime);}
if(FT.analytics.sendGeoIPLater){if(typeof FT.analytics.waitForAyscCookie==="undefined"){FT.analytics.waitForAyscCookie=function(callback,timeout,count){if(typeof timeout==="undefined"){timeout=100;}
if(typeof count==="undefined"){count=0;}
var thisAYSC=document.cookie.match(/AYSC=([^;]+)/)?RegExp.$1:"";count++;if(thisAYSC===""&&count<25){setTimeout(function(){FT.analytics.waitForAyscCookie(callback,timeout,count);},timeout);}else{callback();}};}
FT.analytics.waitForAyscCookie(function(){aysc_cookie=document.cookie.match(/AYSC=([^;]+)/)?RegExp.$1:null;if(aysc_cookie&&FT.analytics.sendGeoIPLater){ipCountry=aysc_cookie.match(/_14([a-zA-Z0-9%]+)/)?RegExp.$1:null;regArea=aysc_cookie.match(/_17([a-zA-Z0-9%]+)/)?RegExp.$1:null;metroArea=aysc_cookie.match(/_18([a-zA-Z0-9%]+)/)?RegExp.$1:null;if(ipCountry){FT.analytics.siteIntelligence.addTrackParam("WT.ipCountry_s",ipCountry);}
if(metroArea){FT.analytics.siteIntelligence.addTrackParam("WT.metroArea_s",metroArea);}
if(regArea){FT.analytics.siteIntelligence.addTrackParam("WT.regArea_s",regArea);}}
FT.analytics.siteIntelligence.sendTrackParams();},179);}else if(pmData.hasOwnProperty("perceivedLoadTime")){FT.analytics.siteIntelligence.sendTrackParams();}}
FT.analytics.performanceSender.init({cookies:true});if(FT.cookie.getParam("FTQA","performanceReport")){FT.$(window).on("load",function(){FT.$doc.trigger("showPanel.performanceReport");});FT.$doc.on("showPanel.performanceReport",function(){FT.analytics.performanceMonitor.init(FT.analytics.timerStore.getTimers());FT.analytics.performanceReport.updateData(FT.analytics.performanceMonitor.getData());});}
if('ontouchstart'in document.documentElement){var $body=FT.$("body");$body.removeClass('hoverable');}});FT.StoryTools=function(stc){this.storyToolsContainer=FT.$(stc);var shareThis=new FT.StoryTools.ShareThis(this.storyToolsContainer),clippings=new FT.StoryTools.Clippings(this.storyToolsContainer.find(".clipButton a")),emailThis=new FT.StoryTools.EmailThis(this.storyToolsContainer),printThis=new FT.StoryTools.PrintThis(this.storyToolsContainer.find(".printButton a"));};FT.StoryTools.Clippings=function(anc){if(FT.$(anc)){this.init(anc);}};FT.StoryTools.Clippings.prototype.init=function(anc){var ts=new Date().getTime();this.rand=Math.floor(Math.random()*ts)+ts;this.anchor=FT.$(anc);this.container=this.anchor.parent();this.containerId=this.container.attr("id");this.qs=this.anchor.attr("href").split("?")[1];this.imagesStr=FT.$.makeArray(FT.$(".fullstoryBody").find("img").map(function(){return FT.$(this).attr("src");})).join(",");this.getClippingsScript();};FT.StoryTools.Clippings.prototype.getClippingsScript=function(){var scriptInclude="http://clippings.ft.com/clipthis/js"+"?containerid="+this.containerId+"&output=text"+"&nocache="+this.rand+"&"+this.qs;FT.$.getScript(scriptInclude);};FT.StoryTools.ShareThis=function(anc){this.anchor=anc;this.buttons=this.anchor.find('.shareButton');var myself=this;if(!FT.storyTools||!FT.storyTools.shareList||(FT.storyTools&&(FT.storyTools.shareList&&FT.storyTools.shareList.length===0))){this.buttons.hide();return false;}
this.buttons.find('a').click(function(e){e.stopPropagation();e.preventDefault();myself.showOverlay(FT.$(this));return false;});};FT.StoryTools.ShareThis.prototype.alreadyRendered=false;FT.StoryTools.ShareThis.prototype.initRender=function(){if(!FT.StoryTools.ShareThis.prototype.alreadyRendered){FT.$('#closeShareListOverlay').click(function(e){e.stopPropagation();e.preventDefault();FT.StoryTools.ShareThis.prototype.hideOverlay();return false;});FT.StoryTools.ShareThis.prototype.render();FT.StoryTools.ShareThis.prototype.alreadyRendered=true;}};FT.StoryTools.ShareThis.prototype.showOverlay=function(sourceElement){FT.StoryTools.ShareThis.prototype.initRender();var overlay=FT.$('#shareListOverlay');overlay.parents('div.fullstoryHeader .shareButton').css('z-index','1');overlay.show().appendTo(sourceElement.parents('.shareButton'));overlay.parents('div.fullstoryHeader .shareButton').css('z-index','500');overlay.bgiframe();};FT.StoryTools.ShareThis.prototype.hideOverlay=function(){var overlay=FT.$('#shareListOverlay');overlay.parents('div.fullstoryHeader .shareButton').css('z-index','1');overlay.hide();};FT.StoryTools.ShareThis.prototype.render=function(){var self=this,ul=FT.$('#shareListOverlay').find('ul').empty(),shareManager=new FT.Share.ShareManager(FT.storyTools.shareList,true),shareList=shareManager.getShareItems(),i;for(i=0;i<shareList.length;i++){shareList[i].getRenderedListItemLink().appendTo(ul);}
FT.Share.bitlyService.shortenUrl(FT.Share.pageShareInfo.canonicalUrl);ul.click(function(e){var a=FT.$(e.target).parents('a').andSelf().filter('a');if(a.length){self.hideOverlay();e.stopPropagation();}});};FT.StoryTools.ShareThis.prototype.destroy=function(){FT.StoryTools.ShareThis.prototype.alreadyRendered=false;FT.$('#closeShareListOverlay').unbind();FT.$('#shareListOverlay').find('ul').unbind();};FT.StoryTools.PrintThis=function(printButton){FT.$(printButton).click(function(e){e.preventDefault();FT.analytics.siteIntelligence.trackData("print=true");window.print();});};FT.StoryTools.EmailThis=function(anc){var self=this,el;this.anchor=anc;this.button=this.anchor.find('.emailButton');this.form=this.button.find('form');this.emailThisDomain=this.form.attr("action").match(/https?:\/\/[^\/]*/)[0]||"emailthis.t.ft.com";this.form.submit(function(){self.loadAssankaScript();return false;});el=FT.$('<a href="#"><span>Email</span></a>');el.click(function(eventData){self.form.trigger('submit');eventData.preventDefault();return false;});FT.$(anc).find('form').hide();FT.$(anc).find('li.emailButton').append(el);};FT.StoryTools.EmailThis.prototype.loadAssankaScript=function(){FT.$.getScript(this.emailThisDomain+"/api/load?id="+this.form.attr('id'));if(!FT.$(document.body).attr('si:pageID')){FT.analytics.siteIntelligence.setPageId(pageUUID);}
return false;};FT.analytics=FT.analytics||{};FT.analytics.SiTrackLinks=function($sel,group,first){this.links=$sel;this.firstlinks=this.links.parents(group).find(first);this.links.bind("click",this.clickHandler);this.makeSiImpressionCall();};FT.analytics.SiTrackLinks.prototype={makeSiImpressionCall:function(){this.firstlinks.each(function(){FT.analytics.siteIntelligence.trackData("elementview=partner-feed-"+this.hostname);});},clickHandler:function(ev){var a=ev.target;a.setAttribute("si:link","partner-click-"+a.hostname);return FT.analytics.siteIntelligence.trackExternalLink(a);},destroy:function(){this.links.unbind("click",this.clickHandler);this.links=FT.$([]);}};FT.analytics=FT.analytics||{};FT.analytics.clickPositionReporter=(function($){"use strict";var alreadyClickedLinks=[];function getSiFormatOfElementInfo(info){return $.grep([info.zone,info.container,info.pos,info.name,info.storyPackage],function(obj){return(obj);}).join('/');}
function getElementInfo(element){var zone=element.closest('[data-track-zone], [data-zone]'),container=element.closest('[data-track-comp-view], [data-track-comp-name], [data-comp-view], [data-comp-name]'),pos=element.closest('[data-track-pos], [data-pos]'),name=element.attr('href')||'',story=element.closest('.contentPackage, [data-track-region]');zone=(zone.length>0?(zone.data('track-zone')||zone.data('zone')):null);container=(container.length>0?(container.data('track-comp-view')||container.data('track-comp-name')||container.data('comp-view')||container.data('comp-name')):null);pos=(pos.length>0?(typeof pos.data('track-pos')!=="undefined"?pos.data('track-pos'):pos.data('pos')).toString():null);name=name.replace(/^http:\/\/[\w\.]+/,'').replace(/^\//,'').replace(/(\?|#).*$/,'').replace(/\/$/,'').replace(/\.[a-z]{3,4}$/,'');story=!!story.length;if(name===''){name=element.attr('href').replace(/^http:\/\//,'').split('?')[0].replace(/\/$/,'');}
if(name.length===0){return{zone:'',container:'',pos:'',name:'',storyPackage:''};}
name=$.grep(name.split('/').slice(-2),function(obj){return(obj);});if(name.slice(-1)[0].match(/[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}/)){name=name.slice(-1);}
name=(name.length>1?name.slice(0,2).join('-'):name[0]).toLowerCase();return{zone:zone,container:container,pos:pos,name:name,storyPackage:(story?'storyPackage':null)};}
function getPosition($element){return getSiFormatOfElementInfo(getElementInfo($element));}
function trackLink(element){if($.inArray(element,alreadyClickedLinks)===-1){alreadyClickedLinks.push(element);var $element=$(element),analyticsInfo=getPosition($element);if(analyticsInfo.length){$element.attr('si:link',analyticsInfo);if(element.hostname){if(element.hostname.indexOf('ft.com')!==-1){FT.analytics.siteIntelligence.trackLink(element);}else{FT.analytics.siteIntelligence.trackExternalLink(element);}}}}}
function addEventListeners(d){d.on('mouseup.positionalAnalytics','[data-pos] a, [data-track-pos] a',function(event){if(event.which===1||event.which===2){trackLink(this);}});d.on('click.positionalAnalytics','[data-pos] a, [data-track-pos] a',function(){trackLink(this);});}
function articleAttributes(){if(FT.isPage.Story===1){$('#storyContent > p:has(a), #storyContent > ul:has(a), #storyContent > ol:has(a)').each(function(index){$(this).attr('data-track-pos',index);});}}
function destroy(d){d.off('.positionalAnalytics');}
function init(d){if(typeof d==="undefined"){d=$(document);}else{d=$(d);}
destroy(d);articleAttributes();addEventListeners(d);}
return{init:init,getPosition:getPosition,alreadyClickedLinks:function(){return alreadyClickedLinks;},destroy:destroy};}(FT.$));var FT=FT||{};FT.analytics=FT.analytics||{};FT.analytics.downloadLinkTrack=(function(){"use strict";var extensions=['pdf','doc'],links=[];function getLinks(){return links;}
function init(){links=FT.$('a').filter(function(){return new RegExp('('+extensions.join('|')+')$','i').test(FT.$(this).attr('href'));});links.on('click.analytics.downloadLinkTrack',function(event){event.preventDefault();FT.analytics.siteIntelligence.trackExternalLink(this.href,function(){});window.open(this.href);});return links;}
function cancel(){links.off('click.analytics.downloadLinkTrack');links=[];}
return{init:init,getLinks:getLinks,cancel:cancel};}());var FT=FT||{};FT.analytics=FT.analytics||{};FT.analytics.performanceMonitor=(function(){var dataHolder={};function collectData(key){var itemData={},pageObject=FT.$("[data-timer-key='"+key+"']");if(pageObject.length!==0){itemData.pageObject=pageObject;itemData.zone=pageObject.closest("[data-zone]").data("zone");itemData.compName=pageObject.data("comp-name");itemData.compView=pageObject.data("comp-view");itemData.compIndex=pageObject.data("comp-index");}
return itemData;}
function storeTimer(key,timerData){var item={},keyType=timerData.keyType||null;if(keyType==="el"){item=collectData(key);}
item.renderStart=timerData.start;item.renderStop=timerData.stop;item.renderTime=(item.renderStop-item.renderStart)/1000;dataHolder[key]=item;}
return{init:function(timers){FT.$.each(timers,storeTimer);},getData:function(){return FT.$.extend({},dataHolder);},clear:function(){dataHolder={};}};}());var FT=FT||{};FT.analytics=FT.analytics||{};FT.analytics.performanceSender=(function(){"use strict";var debug=false,url='http://track.ft.com/log',num_of_chars=3,join_char='.',cookies=false,performanceData={},num_chars_less_one=(num_of_chars-1<=0?1:num_of_chars-1),num_chars_less_two=(num_chars_less_one-1<=0?1:num_chars_less_one-1),mappings={},duplicates=[],sent=false,windowLoaded=false;function setUrl(u){url=u;return url;}
function obLength(obj){var length=0,key;for(key in obj){if(obj.hasOwnProperty(key)){length=length+1;}}
return length;}
function log(title,msg){if(debug&&window.console){if(window.console){window.console.log('FT.analytics.performanceSender.'+title);if(typeof(msg)!=='undefined'){window.console.log(msg);}}}}
function isSent(){return sent;}
function hasWindowPerformance(){log('window.performance',window.performance);return(typeof window.performance!=='undefined');}
function map(item){if(typeof item!=='string'){return item;}
if(/[A-Z_]/.test(item)){return item.substring(0,num_chars_less_one)+item.substring(num_chars_less_one).replace(/([a-z0-9]*)([A-Z]|_)([a-z0-9]+)/g,function(str,m1,m2,m3){return(m2==='_'?m3.substring(0,num_of_chars):m2+m3.substring(0,num_chars_less_two));});}
return item.substring(0,num_chars_less_one)+item.charAt(item.length-1);}
function compact(item){return(typeof item==='string'?item.replace(/\W+/g,''):item);}
function setData(data){var i,label,key;performanceData={};if(data.hasOwnProperty('perceivedLoadTime')){performanceData['perceivedLoadTime']=(data['perceivedLoadTime'].renderStop-data['perceivedLoadTime'].renderStart);}
log('performanceData',performanceData);}
function cookie_lengths(){var thecookies=document.cookie.split(';'),i,lengths={},c;for(i=0;i<thecookies.length;i++){c=thecookies[i].split('=');lengths["C_"+c[0].replace(/\s+/g,'')]=c.slice(1).join('=').length;}
return lengths;}
function getData(){var timing,data=FT.$.extend({'type':'metrics','duplicates':duplicates},performanceData);if(hasWindowPerformance()){timing=window.performance.timing;data=FT.$.extend({'fullLoad':(timing.loadEventEnd-timing.responseEnd),'network':(timing.responseEnd-timing.fetchStart)},data);}
if(cookies&&typeof document.cookie!=="undefined"){data=FT.$.extend({'cookieLength':document.cookie.length},data);data=FT.$.extend(cookie_lengths(),data);}
log('getData',data);return data;}
function getMappings(){return mappings;}
function getDuplicates(){if(duplicates.length===0){return false;}
return duplicates;}
function send(){var data=getData();sent=true;FT.$.ajax({url:url,data:data,cache:false,dataType:"script"}).done(function(){log('sent','success');}).always(function(){log('sent','complete');});}
if(hasWindowPerformance()){window.onload=function(){log('window.loaded');setTimeout(function(){windowLoaded=true;},0);};}
function init(options){if(typeof options==="undefined"){options={};}
if(options.hasOwnProperty('cookies')){cookies=options.cookies;}
if(options.hasOwnProperty('debug')){if(options.debug===true){debug=true;}}
if(typeof(FT.analytics.performanceMonitor)!=='undefined'&&FT.analytics.performanceMonitor.hasOwnProperty('getData')){log('init','pm found');if(typeof(FT.analytics.performanceMonitor.getData())!=='undefined'){if(obLength(FT.analytics.performanceMonitor.getData())>0){log('init','pm data found');if((hasWindowPerformance()&&windowLoaded)||!hasWindowPerformance()){setData(FT.analytics.performanceMonitor.getData());return send();}}}}
log(' No data found. Waiting...');setTimeout(init,800);}
return{init:init,setUrl:setUrl,setData:setData,getData:getData,send:send,getMappings:getMappings,getDuplicates:getDuplicates,isSent:isSent,debugOn:function(){debug=true;},debugOff:function(){debug=false;}};}());FT.analytics=FT.analytics||{};FT.analytics.scrolling=(function($){"use strict";var documentHeight=0,windowHeight=0,maxScrollSeen=0,stoppedScrolling=0;function scrollingTag(){var windowBottom=$(window).scrollTop()+windowHeight,quartile=Math.floor(((windowBottom/documentHeight)*4))*25;if(quartile>maxScrollSeen){maxScrollSeen=quartile;FT.analytics.siteIntelligence.sendAdditionalTracer("/si/scroll","maxscroll="+quartile);}}
function maxQuartile(){return maxScrollSeen;}
$(window).on("load",function(){documentHeight=$(document).height();windowHeight=$(window).height();if(documentHeight>0&&windowHeight>0){$(window).scroll(function(){clearTimeout(stoppedScrolling);stoppedScrolling=setTimeout(scrollingTag,1000);});}});return{maxQuartile:maxQuartile};}(FT.$));FT.render.Carousel=function(el,conf){var myself=this,config,containerWidth=el.width(),itemList=el.find('.carousel-collection'),items=itemList.find(".carousel-item"),prevButton=el.find('.carousel-prev'),nextButton=el.find('.carousel-next'),currentGroup=0,totalItems=items.size(),totalGroups;function init(){setDefaultConfig();totalGroups=Math.ceil(totalItems/config.itemsPerView);applyInitialCss();updateButtonStates();bindClickEvents();}
function applyInitialCss(){items.filter(":nth-child("+config.itemsPerView+"n-"+(config.itemsPerView-1)+")").addClass("carousel-group-start");items.filter(":nth-child("+config.itemsPerView+"n)").addClass("carousel-group-end");itemList.css("width",containerWidth*totalGroups);}
function setDefaultConfig(){config=(FT.$.type(conf)!=="object")?{}:conf;config=FT.$.extend({itemsPerView:1,transitionDuration:500},config);}
function isValidItem(n){return(typeof n==="number"&&(n>=0&&n<totalItems));}
function isValidGroup(n){return(typeof n==="number"&&(n>=0&&n<totalGroups));}
function getGroupFromItemNumber(n){return Math.floor(n/config.itemsPerView);}
function showGroup(n){itemList.animate({left:(containerWidth*n)*-1,useTranslate3d:true},config.transitionDuration,runIpad5fix);}
function runIpad5fix(){itemList.css('opacity','0.99');setTimeout(function(){itemList.css('opacity','1');},1);}
function setVisibility(el,visible){if(visible){el.removeClass("carousel-hidden");}else{el.addClass("carousel-hidden");}}
function updateButtonStates(){setVisibility(prevButton,currentGroup>0);setVisibility(nextButton,currentGroup<totalGroups-1);}
function bindClickEvents(){prevButton.on("click.carousel",function(){myself.goToPrevious();});nextButton.on("click.carousel",function(){myself.goToNext();});}
this.setCurrentItem=function(n){if(isValidItem(n)){var group=getGroupFromItemNumber(n);if(isValidGroup(group)){myself.setCurrentGroup(group);}}};this.setCurrentGroup=function(n){if(isValidGroup(n)&&n!==currentGroup){currentGroup=n;showGroup(currentGroup);if(typeof config.onChange==="function"){config.onChange(currentGroup);}
updateButtonStates();}};this.getCurrentGroup=function(){return currentGroup;};this.goToNext=function(){if(isValidGroup(currentGroup+1)){myself.setCurrentGroup(currentGroup+1);}};this.goToPrevious=function(){if(isValidGroup(currentGroup-1)){myself.setCurrentGroup(currentGroup-1);}};this.destroy=function(){prevButton.off(".carousel");nextButton.off(".carousel");prevButton=null;nextButton=null;items=null;totalItems=null;totalGroups=null;};init();};FT.Conker=function(){this.urlConker='http://conker.ft.com/conker/service/pageView?callback=?';this.urlPopup='/m/html/conker-message.htm';this.bDebug=false;this.bShowDebug=false;this.bForcePopup=false;this.bUseTimer=true;this.resetFlags();FT.Conker.instance=this;this.container=FT.$('<div id="conker-div">').appendTo(document.body);return this;};var _dumpThis=_dumpThis||function(thing){return thing;};FT.Conker.prototype.resetFlags=function(){this.eRightsId=undefined;this.trackId=undefined;this.eSessionId=undefined;this.isRegistered=undefined;this.isHelpDesk=undefined;};FT.Conker.prototype.isEmpty=function(value){return(typeof value==='undefined'||value===null);};FT.Conker.prototype.checkConcurrency=function(eRightsId,eSessionId,trackId,rcCallBack){var self=this,AjaxParams={'eUserId':eRightsId,'trackId':trackId};AjaxParams.eSessionId=(!this.isEmpty(eSessionId))?eSessionId:'';this.debug('checkConcurrency('+this.urlConker+', '+_dumpThis(AjaxParams,'AjaxParams')+')');FT.$.getJSON(this.urlConker,AjaxParams,function(data){rcCallBack(data,self);});};FT.Conker.prototype.getCookies=function(){var bSuccess=true,cookieFTU,cookieRemember,cookieHelpDesk;this.debug('getCookies()');this.resetFlags();this.trackId=FT.$.cookie('FTUserTrack');if(this.isEmpty(this.trackId)){bSuccess=false;}else{cookieFTU=FT.$.cookie('FT_U');if(!this.isEmpty(cookieFTU)){cookieFTU.match(/_EID=([^_]*)_/);this.eRightsId=RegExp.$1;cookieFTU.match(/_RI=([^_]*)_/);this.isRegistered=RegExp.$1==='1'?true:false;this.eSessionId=FT.$.cookie('FTSession');if(this.isEmpty(this.eSessionId)){bSuccess=false;}}else{cookieRemember=FT.$.cookie('FT_Remember');if(!this.isEmpty(cookieRemember)){cookieRemember.match(/^(\d+):/);this.eRightsId=RegExp.$1;this.isRegistered=false;}else{bSuccess=false;}}}
cookieHelpDesk=FT.$.cookie('FT_HelpDesk');this.isHelpDesk=!this.isEmpty(cookieHelpDesk);this.debug('getCookies() return '+bSuccess);return bSuccess;};FT.Conker.prototype.deleteCookies=function(){var options={path:'/',domain:'.ft.com'};FT.$.cookie('FT_U',null,options);FT.$.cookie('FT_User',null,options);FT.$.cookie('FTSession',null,options);FT.$.cookie('FT_Remember',null,options);this.resetFlags();};FT.Conker.prototype.injectMessage=function(){var self=this;this.debug('injectMessage('+this.urlPopup+')');FT.$.get(this.urlPopup,function(data){self.container.html(data.replace(/[\r\n]+/g,' '));self.sizeElements('inject');FT.$(window).resize(function(){self.sizeElements('window resize');});});};FT.Conker.prototype.positionOverlay=function(why){if(!this.overlay){this.overlay=FT.$('<div class="conkerOverlay"></div>').appendTo(document.body);}
var docWidth=FT.$(window).width(),docHeight=FT.$(document).height();this.debug("("+why+") Overlay Div Pos: [conkerOverlay] ("+docWidth+", "+docHeight+")");if(this.overlay){this.overlay.css('width',docWidth+"px");this.overlay.css('height',docHeight+"px");}};FT.Conker.prototype.positionPopup=function(){var header=FT.$('#header'),popup=FT.$('.conkerContainer');FT.$('div.conkerContainer').css({left:header.offset().left+header.width()-popup.outerWidth(),top:header.offset().top-8});};FT.Conker.prototype.sizeElements=function(label){this.positionOverlay(label);this.positionPopup();};FT.Conker.prototype.debug=function(message){var debugDiv=(FT.$('div#conkerDebug').length)?FT.$('div#conkerDebug'):FT.$('<div id="conkerDebug"></div>').appendTo(FT.$(document.body));if(this.bDebug){debugDiv.append(FT.$("<p>").text(message));}
if(this.bShowDebug){debugDiv.show();}else{debugDiv.hide();}};FT.Conker.applyConcurrencyLogic=function(rcCallback,bForcePopup,bUseTimer,bDebug,bShowDebug){var rConker=new FT.Conker();rConker.bForcePopup=false;rConker.bUseTimer=bUseTimer?true:false;rConker.bDebug=bDebug?true:false;rConker.bShowDebug=bShowDebug?true:false;if(bForcePopup){rConker.debug('Forcing popup to show');rConker.bForcePopup=true;rConker.getCookies();if(rConker.isEmpty(rConker.eRightsId)){rConker.eRightsId='1';}
if(rConker.isEmpty(rConker.eSessionId)){rConker.eSessionId='1';}
if(rConker.isEmpty(rConker.trackId)){rConker.trackId='127.0.0.1.123456789012345678';}
rConker.debug('rConker: '+_dumpThis(rConker,'rConker'));}else if(rConker.getCookies()){if(!rConker.isRegistered&&!rConker.isHelpDesk){bForcePopup=true;}}
if(bForcePopup){rConker.checkConcurrency(rConker.eRightsId,rConker.eSessionId,rConker.trackId,rcCallback);}};FT.Conker.hidePopup=function(){var bForcePopup=false;if(typeof FT.Conker.instance!=='undefined'){FT.Conker.instance.debug('Clearing timer interval: '+FT.Conker.instance.timerId);if(FT.Conker.instance.timerId){clearInterval(FT.Conker.instance.timerId);}
bForcePopup=FT.Conker.instance.bForcePopup;}
if(bForcePopup){FT.Conker.instance.container.hide();FT.Conker.instance.overlay.hide();}};FT.Conker.receiveConkerResponse=function(data){FT.Conker.instance.debug('receiveConkerResponse()');if(data.deny){FT.Conker.instance.debug('receiveConkerResponse() denied');if(!FT.Conker.instance.bForcePopup){FT.Conker.instance.deleteCookies();}
FT.Conker.instance.injectMessage();}};FT.Render.deviceSwitching=(function(){var cookieName="FT_M",cookieDaysToPersist=365,linkEl,paramOverrides,cookieArray;function reset(){paramOverrides={"R":"0"};cookieArray=[];}
function setParamOverride(name,value){paramOverrides[name]=value;}
function getParamOverride(name,value){return paramOverrides[name]||value;}
function createParamPair(name,value){return name+"="+value;}
function addLinkToPage(targetEl,href,text){linkEl=FT.$('<a />',{href:href,text:text,id:'deviceSwitchingLink'});targetEl.append(linkEl);}
function removeLinkFromPage(){if(linkEl){linkEl.unbind().remove();}}
reset();return{getDevice:function(){var d="",c,l;for(c=0,l=cookieArray.length;c<l;c++){if(cookieArray[c].name==="D"){d=cookieArray[c].value;}}
return d;},writeCookie:function(cookieString){var expires=new Date();expires.setDate(expires.getDate()+cookieDaysToPersist);document.cookie=cookieName+"="+cookieString+";expires="+expires.toUTCString()+";path=/;domain=.ft.com";},readCookie:function(){return FT.$.cookie(cookieName);},parseCookieString:function(cookieString){if(typeof cookieString!=="string"){return"";}
var allParams=cookieString.split("|"),c,l,thisParam,param;cookieArray=[];for(c=0,l=allParams.length;c<l;c++){thisParam=allParams[c].split("=");param={name:thisParam[0],value:thisParam[1]};cookieArray.push(param);}
return cookieArray;},recreateCookieString:function(cookieArray){if(Object.prototype.toString.call(cookieArray)!=='[object Array]'){return"";}
var cookieStringParams=[],c,l,param;for(c=0,l=cookieArray.length;c<l;c++){param=cookieArray[c];param.value=getParamOverride(param.name,param.value);cookieStringParams.push(createParamPair(param.name,param.value));}
return cookieStringParams.join("|");},replaceHostname:function(urlToReplace,replacementHostname){var currentHostname=urlToReplace.replace('http://','').replace('https://','').split(/[\/\?#]/)[0];return urlToReplace.replace(currentHostname,replacementHostname);},renderLink:function(targetEl,deviceType,pageUrl){removeLinkFromPage();var href;switch(deviceType){case"A":href=this.replaceHostname(pageUrl,"app.ft.com");addLinkToPage(targetEl,href,"App version");break;case"M":href=this.replaceHostname(pageUrl,"m.ft.com");addLinkToPage(targetEl,href,"Mobile version");break;default:}},setFormatPreference:function(format){setParamOverride("F",format);var cookieString=this.recreateCookieString(cookieArray);this.writeCookie(cookieString);},run:function(targetEl){cookieArray=this.parseCookieString(this.readCookie());var updatedCookieString=this.recreateCookieString(cookieArray),userDevice=this.getDevice(),myself;this.writeCookie(updatedCookieString);this.renderLink(targetEl,userDevice,top.location.href);if(linkEl){myself=this;linkEl.bind("click",function(){myself.setFormatPreference(userDevice);});}},destroy:function(){reset();removeLinkFromPage();}};}());var FT=FT||{};FT.render=FT.render||{};FT.render.EditionChanger=function(selector){var $ec=FT.$(selector),myself=this,$closeButton=FT.$('<span class="closeButton" />');this.addEvents=function(){$ec.on("click.editionChanger",function(){myself.open();});$closeButton.on("click.editionChanger",function(e){e.stopPropagation();myself.close();});};this.open=function(){if(FT.render&&FT.render.page){FT.render.page.closeAll();}
$ec.addClass('open');setTimeout(function(){FT.$(document.body).on("click.editionChanger",function(){myself.close();});},10);};this.close=function(){$ec.removeClass('open');FT.$(document.body).off("click.editionChanger");};this.setupEditionLinks=function(){$ec.find('a').on("click",function(e){e.preventDefault();var href=FT.$(this).attr("href"),edition=myself.getEditionFromHrefString(href);if(edition!==""){myself.setEdition(edition.toLowerCase());}
myself.changeLocation(href);});};this.setEdition=function(edition){if(!FT.cookie){return;}
FT.cookie.setParam("AYSC",28,edition);};this.changeLocation=function(url){window.location=url;};this.getEditionFromHrefString=function(hrefString){return hrefString.match(/\/home\/([^\/]*)/)?RegExp.$1:"";};this.destroy=function(){$ec.off(".editionChanger");$closeButton.off(".editionChanger");FT.$(document.body).off(".editionChanger");$ec.find('a').off(".editionChanger");$ec.addClass("basic").removeClass("enhanced");};$ec.removeClass("basic").addClass("enhanced");$ec.find("p").append($closeButton);this.addEvents();this.setupEditionLinks();};FT.render.ImageSet=function(el,imageItems,conf){var imageCount=imageItems.size(),selectedClass="imageset-selected",config,current=-1,myself=this,imageSelectedMarkupSelector='div.indicate-imageset-selected',imageSelectedMarkup='<div class="indicate-imageset-selected"></div>';this.id=el.attr("id");function init(){setDefaultConfig();bindClickEvents();}
function setDefaultConfig(){config=(FT.$.type(conf)!=="object")?{}:conf;config=FT.$.extend({},config);}
function isValidItem(n){return(FT.$.type(n)==="number"&&n>=0&&n<imageCount);}
function bindClickEvents(){el.find("ul").on("click.imageset","li",function(ev){var imageNum=imageItems.index(FT.$(ev.target).closest("li"));if(isValidItem(imageNum)){myself.setSelected(imageNum);}});}
this.setSelected=function(n){if(isValidItem(n)&&n!==current){imageItems.removeClass(selectedClass);imageItems.find(imageSelectedMarkupSelector).remove();imageItems.eq(n).append(imageSelectedMarkup);imageItems.eq(n).addClass(selectedClass);current=n;if(typeof config.onSelected==="function"){config.onSelected(current);}}};this.getSelected=function(){return current;};this.destroy=function(){el.find("ul").off(".imageset");imageItems.removeClass(selectedClass);};init();};FT.Render.JobsBox=function(selector,redirectURL){this.selector=selector;this.elComponentWrapper=FT.$(selector);this.redirectURL=redirectURL;this.initPlaceholder=function(){this.elComponentWrapper.find('input[placeholder]').placeholder({focusClass:'inputPlaceholderFocus',activeClass:'inputPlaceholder'});};this.addSubmitLogic=function(){var myself=this;FT.$(document).on('submit.jobsbox',this.selector,function(eventData){var target=eventData.target;if(target.keyword.value===''){eventData.preventDefault();if(redirectURL){location.href=myself.redirectURL;}
return false;}});};this.disableSubmit=function(){this.destroy();FT.$(document).on('submit.jobsbox',this.selector,function(eventData){eventData.preventDefault();return false;});};this.destroy=function(){FT.$(document).off('.jobsbox',this.elComponentWrapper);};this.initPlaceholder();this.addSubmitLogic();};FT.Render.Navigation=function(selector){this.el=FT.$(selector);var myself=this;this.el.removeClass("basic");this.elLk={};this.elLk.toplevel={};this.elLk.toplevel.li=this.el.children('li');this.elLk.toplevel.a=this.elLk.toplevel.li.children('a');this.elLk.toplevel.buttons=this.elLk.toplevel.a.children('em');this.elLk.toplevel.subnavs=this.elLk.toplevel.a.children('ul');this.onDeselect=function(){myself._onDeselect.apply(myself,arguments);};if(!FT.render.page.isEditor()){this.addEventListeners();}};FT.Render.Navigation.prototype.close=function(){this.onDeselect();};FT.Render.Navigation.prototype.addEventListeners=function(){var myself=this;this.elLk.toplevel.li.each(function(){var li=FT.$(this),a=li.children('a'),button=a.children('em'),subNav=li.find('ul');if(subNav.length>0){button.click(function(event){if(!FT.$(this).parent().hasClass('on')){if(li.hasClass('navopen')){li.removeClass('navopen');}else{if(FT.render&&FT.render.page){FT.render.page.closeAll();}else{myself.close();}
li.addClass('navopen');var leftPos=li.position().left;if(li.hasClass("last-child")){leftPos-=subNav.width()-li.width()-li.find("em").width()+4;}
subNav.css("left",leftPos);}}
event.cancelBubble=true;if(event.stopPropagation){event.stopPropagation();}
return false;});}
FT.$("li.on ul.subnav li").hover(function(){FT.$(this).addClass("hover");},function(){FT.$(this).removeClass("hover");});});FT.$('body').click(this.onDeselect);FT.$("ul#navigation .subnav li:first-child, ul#navigation .dummy-child").append('<div class="tl"></div><div class="tr"></div>');FT.$("ul#navigation .subnav li:last-child").append('<div class="bl"></div><div class="br"></div>');};FT.Render.Navigation.prototype.distribute=function(){if(FT.preInit&&typeof FT.preInit.distributeNavItems==="function"){FT.preInit.distributeNavItems(this.el[0]);}};FT.Render.Navigation.prototype._onDeselect=function(){this.elLk.toplevel.li.removeClass('navopen');};FT.Render.Navigation.prototype.disable=function(){FT.$("a",this.el).click(function(){return false;});};var FT=FT||{};FT.search=FT.search||{};FT.search.AutoCompleteField=function($field,conf){var myself=this,$form=$field.closest('form'),$resultsContainer,$newsDiv,$quotesDiv,keypressTimeout,query,defaultConfig={itemUrls:{news:'http://search.ft.com/search?ftsearchType=type_news&queryText=[query]',quote:'http://markets.ft.com/research/Markets/Tearsheets/Summary?s=[query]',fund:'http://funds.ft.com/UK/Tearsheet/Summary?s=[query]',more:'http://markets.ft.com/ft/markets/finder.asp?query=[query]'},moreQuotesText:'See more quotes matching [query]',placeholderText:'Search articles and quotes',keyDelay:500,maxNewsMatches:5,maxQuotesMatches:5},canOpen=false,eventHandlers,prevQuery,config=(FT.$.type(conf)==="object")?FT.$.extend({},defaultConfig,conf):defaultConfig;function getMatchesHandler(){query=$field.val();if(query===""){myself.clear();}else if(query!==prevQuery){clearTimeout(keypressTimeout);keypressTimeout=setTimeout(function(){myself.getMatches(query);},config.keyDelay);}
prevQuery=query;}
function highlightNext(){var allListItems=$resultsContainer.find('.ft-autocomplete-item'),next=allListItems.index(FT.$('.highlight'))+1,item;if(next<allListItems.length){item=allListItems.eq(next);myself.highlightResult(item);$field.val(item.data("query")||"");}else{myself.clearHighlight();}}
function highlightPrev(){var allListItems=$resultsContainer.find('.ft-autocomplete-item'),prev=allListItems.index(FT.$('.highlight'))-1,item;if(prev>=0){item=allListItems.eq(prev);myself.highlightResult(item);$field.val(item.data("query")||"");}else{myself.clearHighlight();}}
function clearPlaceholderText(){if($field.hasClass("ft-search-autocomplete-placeholder")){$field.removeClass("ft-search-autocomplete-placeholder").val('');}}
function setPlaceholderText(){if(!$field.is(":focus")&&(config.placeholderText==$field.val()||!$field.val().length)){$field.addClass("ft-search-autocomplete-placeholder").val(config.placeholderText);}}
function deregisterEvents(){$form.off(".ftSearchAutoComplete").off(".ftSearchAutoComplete");$field.off(".ftSearchAutoComplete");}
function registerEvents(){deregisterEvents();$form.on("submit.ftSearchAutoComplete",eventHandlers.submit);$field.on("focus.ftSearchAutoComplete",eventHandlers.focus);$field.on("keyup.ftSearchAutoComplete",eventHandlers.keyUp);$field.on("paste.ftSearchAutoComplete",eventHandlers.paste);$field.on("blur.ftSearchAutoComplete",eventHandlers.blur);$form.on("click.ftSearchAutoComplete",".ft-autocomplete-item a",function(e){e.preventDefault();});$form.on("mousedown.ftSearchAutoComplete",".ft-autocomplete-item a",eventHandlers.itemMouseDown);$form.on("mouseover.ftSearchAutoComplete",".ft-autocomplete-item",eventHandlers.itemMouseOver);$form.on("mouseout.ftSearchAutoComplete",".ft-autocomplete-item",eventHandlers.itemMouseOut);}
function wrapSubstring(str,substr){if(FT.$.type(str)!=="string"){return"";}
if(FT.$.type(substr)!=="string"){return str;}
var re=new RegExp("("+substr+")","gi");return str.replace(re,'<span class="match">$1</span>');}
function createItemLink(text,substr,flag,symbol,href){var $a=FT.$('<a></a>').attr("href",href),itemHTML="";if(flag||symbol){itemHTML=itemHTML+'<span class="detail">';if(flag){itemHTML+=' <span class="wsod-flag flag-'+flag+'"></span>';}
if(symbol){itemHTML+=wrapSubstring(symbol,substr);}
itemHTML+='</span>';}
itemHTML+=wrapSubstring(text,substr);$a.html(itemHTML);return $a;}
function createListItem(cssClass){return FT.$('<li></li>').addClass(cssClass);}
eventHandlers={keyUp:function(e){if(e.which===27&&$resultsContainer.hasClass("open")){myself.clearHighlight();myself.hide();}else if(e.which===13&&$resultsContainer.hasClass("open")&&$resultsContainer.find(".ft-autocomplete-item.highlight").length>0){myself.selectResult($resultsContainer.find(".ft-autocomplete-item.highlight a"));}else if(e.which===40){if(!$resultsContainer.find(".ft-autocomplete-item").length){getMatchesHandler();}else if(!$resultsContainer.hasClass('open')){canOpen=true;myself.show();}else{highlightNext();}}else if(e.which===38){if($resultsContainer.hasClass('open')){highlightPrev();}}else{getMatchesHandler();}},paste:function(){setTimeout(getMatchesHandler,0);},focus:function(){clearPlaceholderText();},blur:function(){myself.hide();setPlaceholderText();},itemMouseOver:function(){myself.highlightResult(FT.$(this));},itemMouseOut:function(){myself.clearHighlight();},itemMouseDown:function(e){deregisterEvents();if(e.which>1){setTimeout(registerEvents,0);return;}
$form.delegate('.ft-autocomplete-item a','mouseup.ftSearchAutoComplete',function(e){eventHandlers.itemMouseUp(e);});},itemMouseUp:function(e){registerEvents();myself.hide();myself.selectResult(FT.$(e.target));},submit:function(e){if($resultsContainer.find('.highlight').length>0){e.preventDefault();}
if($field.hasClass("ft-search-autocomplete-placeholder")||$field.val()===defaultConfig.placeholderText){$field.val('');}}};function createHeading(text){return FT.$('<h6 class="ft-autocomplete-heading"></h6>').text(text);}
function createResultsContainers(){$resultsContainer=FT.$('<div class="ft-autocomplete"></div>').appendTo($form);$newsDiv=FT.$('<div class="ft-autocomplete-news">').append(createHeading("News"));$quotesDiv=FT.$('<div class="ft-autocomplete-quotes">').append(createHeading("Quotes"));$resultsContainer.prepend($newsDiv.hide());$resultsContainer.append($quotesDiv.hide());}
function getQueryUrl(type,query){var url=config.itemUrls[type]||"";if(url.indexOf("[query]")>-1){url=url.replace("[query]",query);}
return url;}
function encodeQueryString(type,query){if(type==="quote"){var splitQuery=query.split(":");if(splitQuery.length===2){return encodeURIComponent(splitQuery[0])+":"+encodeURIComponent(splitQuery[1]);}}
return encodeURIComponent(query);}
function createResultsList(query,data,maxResults){var $list=FT.$('<ul></ul>'),i,l,cssClass,item,$a,$li;for(i=0,l=data.length;i<l&&i<maxResults;i++){cssClass="ft-autocomplete-item"+((i%2===1)?" ft-autocomplete-item-alt":"");item=data[i];item.href=getQueryUrl(item.type,encodeQueryString(item.type,item.query));$a=createItemLink(item.title,query,item.flag,item.symbol,item.href);$li=createListItem(cssClass);$li.html($a);$li.data("query",item.query);$list.append($li);}
return $list;}
this.enable=function(){registerEvents();};this.disable=function(){deregisterEvents();};this.show=function(){if(canOpen){$resultsContainer.addClass('open');}};this.hide=function(){canOpen=false;$resultsContainer.removeClass('open');$resultsContainer.find('.highlight').removeClass('highlight');};this.clear=function(){myself.hide();$newsDiv.hide();$quotesDiv.hide();$resultsContainer.find(".ft-autocomplete-item").remove();};this.clearHighlight=function(){$resultsContainer.find('.highlight').removeClass('highlight');$field.val(query);};this.highlightResult=function(el){this.clearHighlight();if(el.length&&el.hasClass("ft-autocomplete-item")){el.addClass("highlight");}};this.selectResult=function(el){el=el.closest("a");if(el.attr("href")){deregisterEvents();window.location.href=el.attr("href");}};this.getMatches=function(query){if(FT.$.type(query)!=="string"||FT.$.trim(query)===""){return;}
myself.clear();canOpen=true;FT.search.autoCompleteCache.getSuggestions(query,'news',FT.$.proxy(this.updateNewsResults,this));FT.search.autoCompleteCache.getSuggestions(query,'quotes',FT.$.proxy(this.updateQuotesResults,this));};this.updateNewsResults=function(query,data){if(FT.$.type(query)!=="string"||FT.$.type(data)!=="array"){return;}
$newsDiv.find('ul').remove();$newsDiv.hide();if(data.length>0){$newsDiv.append(createResultsList(query,data,config.maxNewsMatches));$newsDiv.show();myself.show();}};this.updateQuotesResults=function(query,data){if(FT.$.type(query)!=="string"||FT.$.type(data)!=="array"){return;}
$quotesDiv.find('ul').remove();$quotesDiv.hide();if(data.length>0){var $ul=createResultsList(query,data,config.maxQuotesMatches),$li;if(FT.search.autoCompleteCache.getShowQuotesMoreLink){$li=createListItem("ft-autocomplete-morelink ft-autocomplete-item"+(($ul.children("li").length%2===1)?" ft-autocomplete-item-alt":""));$li.html(FT.$('<a></a>').attr("href",getQueryUrl("more",encodeURIComponent(query))).html(config.moreQuotesText.replace("[query]",wrapSubstring(query,query))));$ul.append($li);}
$quotesDiv.append($ul);$quotesDiv.show();myself.show();}};this.destroy=function(){deregisterEvents();$resultsContainer.remove();clearPlaceholderText();};$field.attr("autocomplete","off");createResultsContainers();setPlaceholderText();this.enable();};var FT=FT||{};FT.search=FT.search||{};FT.search.autoCompleteCache=(function(){var cache={},callbackQueue={},recentZeroResultQuery={},currentNewsRequest,currentQuotesRequest,config={newsServiceUrl:'http://search.ft.com/typeahead/suggestions/v1/',quotesServiceUrl:'http://markets.ft.com/symbolSearch/data/getSymbols.asp'},removeType=function(query,type){if(typeof cache[query]==='undefined'){return;}
if(typeof cache[query][type]!=='undefined'){delete cache[query][type];}},requestSuggestions={news:function(query){removeType(query,'news');if(typeof currentNewsRequest!=='undefined'){currentNewsRequest.abort();}
currentNewsRequest=FT.$.ajax({url:config.newsServiceUrl+encodeURIComponent(query),dataType:'jsonp',jsonp:'callback',jsonpCallback:'FT.search.autoCompleteCache.requestHandlers.news'});},quotes:function(query){removeType(query,'quotes');removeType(query,'showMoreQuotesLink');if(typeof currentQuotesRequest!=='undefined'){currentQuotesRequest.abort();}
currentQuotesRequest=FT.$.ajax({url:config.quotesServiceUrl,data:{q:query,context:'FT.search.autoCompleteCache'},dataType:'jsonp',jsonp:'callback',jsonpCallback:'requestHandlers.quotes'});}},addQuery=function(query){cache[query]=cache[query]||{};},addType=function(query,type){addQuery(query);cache[query][type]=cache[query][type]||{};},addData=function(query,type,suggestions){addType(query,type);cache[query][type]=suggestions;},getSuggestionsFromCache=function(query,type){var suggestions=[];if(typeof cache[query]!=='undefined'&&typeof cache[query][type]!=='undefined'){suggestions=cache[query][type];}
return suggestions;},addToCallbackQueue=function(query,type,callback){if(typeof callbackQueue[query]==='undefined'){callbackQueue[query]={};}
callbackQueue[query][type]=callback;},doCallback=function(query,type){if(typeof callbackQueue[query]==='undefined'||typeof callbackQueue[query][type]!=='function'){return;}
callbackQueue[query][type](query,getSuggestionsFromCache(query,type));};return{getSuggestions:function(query,type,callback){if(typeof callback!=='function'){callback=function(res){return res;};}
addToCallbackQueue(query,type,callback);if(typeof cache[query]==='undefined'||typeof cache[query][type]==='undefined'){if(typeof recentZeroResultQuery[type]==='undefined'){recentZeroResultQuery[type]='';}
var zeroResultRegex=new RegExp('^'+recentZeroResultQuery[type]+'.*');if(recentZeroResultQuery[type].length===0||!zeroResultRegex.test(query)){recentZeroResultQuery[type]=query;requestSuggestions[type](query);}else{doCallback(query,type);}}else{doCallback(query,type);}},getShowQuotesMoreLink:function(query){if(typeof cache[query]==='undefined'||cache[query].showMoreQuotesLink==='undefined'){return false;}
return cache[query].showMoreQuotesLink;},requestHandlers:{news:function(data){var type="news",oldResults,newResults,c,l;if(data.queryString===recentZeroResultQuery[type]&&data.suggestions.length>0){recentZeroResultQuery[type]='';}
oldResults=data.suggestions;newResults=[];for(c=0,l=oldResults.length;c<l;c++){newResults.push({type:"news",query:oldResults[c].suggestion,title:oldResults[c].suggestion});}
addData(data.queryString,type,newResults);doCallback(data.queryString,type);},quotes:function(query,results,showMoreLink){var type='quotes',data=results,d,len,oldResults,newResults,c,l;if(results.length>0&&FT.$.type(results[0])==='array'){data=[];for(d=0,len=results.length;d<len;d++){data=data.concat(results[d]);}}
if(query===recentZeroResultQuery[type]&&data.length>0){recentZeroResultQuery[type]='';}
oldResults=data;newResults=[];for(c=0,l=oldResults.length;c<l;c++){newResults.push({type:oldResults[c].f===1?"fund":"quote",query:oldResults[c].s,title:oldResults[c].n,flag:oldResults[c].c,symbol:oldResults[c].s});}
addData(query,type,newResults);addData(query,'showMoreQuotesLink',(showMoreLink===1));doCallback(query,type);}}};}());FT.Render.SiteSearch=function(selector,options){this.klass="FT.Render.SiteSearch";var myself=this,useSearchTypeSelect;this.buildRadioOptions=function(){var searchTypeName,searchType,optionInput,optionLabel;this.quotesForWrapperFlag=FT.$('#type_quotes').is(':checked');this.radioWrapper.addClass('withRadios').html('');for(searchTypeName in this.searchTypes){if(this.searchTypes.hasOwnProperty(searchTypeName)){searchType=this.searchTypes[searchTypeName];optionInput=FT.$('<input type="radio" name="ftsearchType" id="'+searchType.name+'" value="'+searchType.name+'" />');optionLabel=FT.$('<label for="'+searchType.name+'">'+searchType.label+'</label>');this.radioWrapper.append(FT.$("<li>").append(optionInput).append(optionLabel));}}};this.setDefaultSelected=function(){var currentSelected=FT.$('input:checked',this.radioWrapper).val();if(currentSelected&&this.searchTypes[currentSelected]){this.currentSearchType=this.searchTypes[currentSelected];}else{if(this.quotesForWrapperFlag){FT.$('input[value=type_quotes]',this.radioWrapper).attr("checked",true);this.currentSearchType=this.searchTypes.type_quotes;}else{FT.$('input[value=type_news]',this.radioWrapper).attr("checked",true);this.currentSearchType=this.searchTypes.type_news;}}
this.applySearchType();};this.addEventListeners=function(){var myself2=this;FT.$('input[type=radio]',this.radioWrapper).click(function(){myself2.setSearchType(this.id);myself2.applySearchType();});myself.form.submit(function(){var anythingToSubmit=false,childTextInputs=FT.$("input[type=text]",this);childTextInputs.each(function(){this.value=this.value.replace(/^\s*|\s*$/g,"").replace(/\s{2,}/g," ");if(this.value.length){anythingToSubmit=true;}});return(anythingToSubmit||childTextInputs.length===0);});};this.removeEventListeners=function(){FT.$('input[type=radio]',this.radioWrapper).unbind();myself.form.unbind();};this.setSearchType=function(optionId){var searchTypeName;for(searchTypeName in this.searchTypes){if(this.searchTypes.hasOwnProperty(searchTypeName)){if(searchTypeName===optionId){this.currentSearchType=this.searchTypes[searchTypeName];}}}};this.applySearchType=function(){this.searchField.attr('name',this.currentSearchType.inputName);this.searchField.attr('autocomplete',this.currentSearchType.autocomplete);this.form.attr('action',this.currentSearchType.action);this.setHiddenInputs();this.currentSearchType.selectHandler.call(this);};this.setHiddenInputs=function(){var name,value;FT.$("input[type=hidden].siteSearchHiddenData",this.form).remove();if(this.currentSearchType&&this.currentSearchType.data){for(name in this.currentSearchType.data){if(this.currentSearchType.data.hasOwnProperty(name)){value=this.currentSearchType.data[name];FT.$("<input class='siteSearchHiddenData' type='hidden' name='"+name+"' value='"+value+"'/>").appendTo(this.form.find("fieldset")[0]);}}}};this.addSymbolSearch=function(){if(!window._wsodSymbolSearch){window._wsodSymbolSearch={};}
var s=new SymbolSearch(this.form[0]);s.setDestinationURL("http://markets.ft.com/tearsheets/performance.asp");s.setRequestURL("http://markets.ft.com/symbolSearch/data/getSymbols.asp");s.setFinderURL("http://markets.ft.com/ft/markets/finder.asp");s.setRequestor(new CrossDomainRequestor());s.requestor.setGlobalContext("window._wsodSymbolSearch['"+this.formId+"']");s.elResults=this.searchResults[0];s.search({},this.searchField[0]);window._wsodSymbolSearch[this.formId]=s;};this.removeSymbolSearch=function(){if(window._wsodSymbolSearch&&window._wsodSymbolSearch[this.formId]){window._wsodSymbolSearch[this.formId].clearInputEventHandlers();window._wsodSymbolSearch[this.formId]=null;}};this.destroy=function(){this.removeEventListeners();this.removeSymbolSearch();this.form=null;this.formId=null;this.searchField=null;this.radioWrapper=null;};this.el=FT.$(selector);this.form=this.el.is("form")?this.el:FT.$("form",this.el);this.searchField=FT.$('input.text',this.form);this.radioWrapper=FT.$('.searchType',this.form);this.searchResults=FT.$('.symbolSearch',this.el);this.formId=this.form.attr('id');this.options=options||{};this.searchTypes={"type_news":{name:"type_news",label:"News",action:this.form.attr("action"),inputName:"queryText",autocomplete:"off",selectHandler:function(){myself.removeSymbolSearch();},data:{}},"type_quotes":{name:"type_quotes",label:"Quotes",action:"http://markets.ft.com/tearsheets/performance.asp",inputName:"s",autocomplete:"off",selectHandler:function(){myself.addSymbolSearch();},data:{vsc_appId:"ts",ftsite:"FTCOM",searchtype:"equity",searchOption:"equity"}}};useSearchTypeSelect=FT.$('#thirdPartySearchSelect').val();if(useSearchTypeSelect===null){this.buildRadioOptions();}
this.addEventListeners();this.setDefaultSelected();};if(!window._wsodSymbolSearch){window._wsodSymbolSearch={};}